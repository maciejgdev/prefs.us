let prefs_us={__prefs_us:{status:null,lastError:null,key:null,ttl:null,domain:"",subdomain:"",project:"",name:"",type:"",list:"",vars:"",option:{readjson:!1},inflate:function(s){return null!==this.ttl&&(s=s+"&ttl="+this.ttl),""!==this.domain&&(s=s+"&domain="+this.domain),""!==this.subdomain&&(s=s+"&subdomain="+this.subdomain),""!==this.project&&(s=s+"&project="+this.project),""!==this.list&&(s=s+"&list="+this.list),s=""!==this.type?s+"&type="+this.type:s}},using:function(key){this.__prefs_us.key=key},getkey:function(keyname,seed,callback=null){return fetch("https://prefs.us/getkey/?user="+keyname+"&seed="+seed,{method:"GET"}).then(response=>response.json()).then(data=>{this.using(data.token),null!==callback&&callback(data)}).catch(error=>{null!==callback&&callback(error)}),this},ttl:function(days){return this.__prefs_us.ttl=days,this},project:function(p){return this.__prefs_us.project=p,this},domain:function(d){return this.__prefs_us.domain=d,this},subdomain:function(s){return this.__prefs_us.subdomain=s,this},type:function(t){return this.__prefs_us.type=t,this},list:function(l){return this.__prefs_us.list=l,this},name:function(n){return this.__prefs_us.name=n,this},key:function(){return __prefs_us.key},find:function(kv){return this.__prefs_us.vars=kv,this},for:function(kv){return this.__prefs_us.vars=kv,this},read:function(callback=null){var url=this.__prefs_us.inflate("https://prefs.us/read/?key="+this.__prefs_us.key+"&"+this.__prefs_us.vars);if(this.__prefs_us.vars="",null==callback)return fetch(url,{method:"GET"});fetch(url,{method:"GET"}).then(response=>this.__prefs_us.option.readjson?response.json():response.text()).then(data=>(null!==callback&&callback(data),data)).catch(error=>{null!==callback&&callback(error)})},write:function(data,callback=null){var url=this.__prefs_us.inflate("https://prefs.us/write/?key="+this.__prefs_us.key),data=encodeURIComponent(data).replace(/%3D/g,"=");return fetch(url+"&"+data,{method:"GET"}).then(response=>response.json()).then(success=>{null!==callback&&callback(success)}).catch(error=>{null!==callback&&callback(error)}),this},post:function(data,callback=null){var url=this.__prefs_us.inflate("https://prefs.us/write/?key="+this.__prefs_us.key);fetch(url,{method:"POST",headers:{"Content-Type":"text/plain"},body:data}).then(response=>response.json()).then(success=>{null!==callback&&callback(success)}).catch(error=>{null!==callback&&callback(error)})},test:function(m){alert(m)},option:function(){return this.__prefs_us.option}};